<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Subject & Class Teacher Allocation - School ERP</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#6366f1',
                        'primary-light': '#818cf8',
                        'bg-light': '#f8fafc',
                        'card-bg': '#ffffff',
                        'text-primary': '#1e293b',
                        'text-secondary': '#64748b',
                        'border-light': '#e2e8f0',
                        'sidebar-bg': '#f1f5f9',
                        'accent': '#3b82f6',
                        'accent-light': '#60a5fa'
                    },
                    fontFamily: {
                        'sans': ['Inter', 'system-ui', 'sans-serif']
                    }
                }
            }
        }
    </script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body class="bg-bg-light font-sans">
    <div class="flex h-screen">
        <!-- Left Sidebar -->
        <div class="w-64 bg-sidebar-bg border-r border-border-light flex-shrink-0">
            <div class="p-6">
                <!-- Logo -->
                <div class="flex items-center space-x-3 mb-8">
                    <div class="w-10 h-10 bg-primary rounded-xl flex items-center justify-center">
                        <span class="text-white text-lg font-bold">S</span>
                    </div>
                    <h1 class="text-xl font-bold text-text-primary">School ERP</h1>
                </div>
                
                <!-- Navigation Menu -->
                <nav class="space-y-2">
                    <a href="#" class="flex items-center px-4 py-3 text-text-secondary hover:bg-white hover:text-text-primary rounded-lg transition-all">
                        <i class="fas fa-home mr-3 w-5"></i>
                        Dashboard
                    </a>
                    <a href="#" class="flex items-center px-4 py-3 text-text-secondary hover:bg-white hover:text-text-primary rounded-lg transition-all">
                        <i class="fas fa-user-graduate mr-3 w-5"></i>
                        Students
                    </a>
                    <a href="#" class="flex items-center px-4 py-3 text-text-secondary hover:bg-white hover:text-text-primary rounded-lg transition-all">
                        <i class="fas fa-chalkboard-teacher mr-3 w-5"></i>
                        Teachers
                    </a>
                    <a href="#" class="flex items-center px-4 py-3 text-text-primary bg-white rounded-lg shadow-sm border-l-4 border-primary">
                        <i class="fas fa-users-cog mr-3 w-5"></i>
                        Allocations
                    </a>
                    <a href="#" class="flex items-center px-4 py-3 text-text-secondary hover:bg-white hover:text-text-primary rounded-lg transition-all">
                        <i class="fas fa-book mr-3 w-5"></i>
                        Subjects
                    </a>
                    <a href="#" class="flex items-center px-4 py-3 text-text-secondary hover:bg-white hover:text-text-primary rounded-lg transition-all">
                        <i class="fas fa-door-open mr-3 w-5"></i>
                        Classes
                    </a>
                    <a href="#" class="flex items-center px-4 py-3 text-text-secondary hover:bg-white hover:text-text-primary rounded-lg transition-all">
                        <i class="fas fa-chart-bar mr-3 w-5"></i>
                        Reports
                    </a>
                    <a href="#" class="flex items-center px-4 py-3 text-text-secondary hover:bg-white hover:text-text-primary rounded-lg transition-all">
                        <i class="fas fa-cog mr-3 w-5"></i>
                        Settings
                    </a>
                </nav>
            </div>
        </div>

        <!-- Main Content -->
        <div class="flex-1 overflow-auto">
            <div class="p-8">
                <!-- Header -->
                <div class="text-center mb-8">
                    <h1 class="text-3xl font-bold text-text-primary mb-2">Subject & Class Teacher Allocation</h1>
                    <p class="text-text-secondary">Assign subject & class teacher to a class for the academic year 2025</p>
                </div>

                <!-- Toggle Tabs -->
                <div class="flex justify-center mb-8">
                    <div class="bg-gray-100 p-1 rounded-xl inline-flex space-x-1">
                        <button id="tab1" class="px-6 py-3 bg-white text-text-primary font-semibold rounded-lg shadow-sm transition-all" onclick="switchTab('tab1')">
                            Subject & Class Teacher
                        </button>
                        <button id="tab2" class="px-6 py-3 text-text-secondary font-medium rounded-lg transition-all hover:bg-gray-200" onclick="switchTab('tab2')">
                            Primary and Secondary Teacher
                        </button>
                    </div>
                </div>

                <!-- Filters Section -->
                <div class="bg-card-bg rounded-xl shadow-sm border border-border-light p-6 mb-6">
                    <div class="grid grid-cols-1 md:grid-cols-5 gap-4 items-end">
                        <div>
                            <label class="block text-sm font-medium text-text-primary mb-2">
                                <i class="fas fa-calendar-alt mr-2 text-primary"></i>
                                Academic Year
                            </label>
                            <select class="w-full px-4 py-3 border border-border-light rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-sm bg-white transition-all">
                                <option>2025</option>
                                <option>2024</option>
                                <option>2023</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-text-primary mb-2">
                                <i class="fas fa-door-open mr-2 text-primary"></i>
                                Class
                            </label>
                            <select class="w-full px-4 py-3 border border-border-light rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-sm bg-white transition-all">
                                <option>Select Class</option>
                                <option>Grade 1A</option>
                                <option>Grade 1B</option>
                                <option>Grade 2A</option>
                                <option>Grade 2B</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-text-primary mb-2">
                                <i class="fas fa-book mr-2 text-primary"></i>
                                Subject
                            </label>
                            <select class="w-full px-4 py-3 border border-border-light rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-sm bg-white transition-all">
                                <option>Select Subject</option>
                                <option>Mathematics</option>
                                <option>English</option>
                                <option>Science</option>
                                <option>Social Studies</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-text-primary mb-2">
                                <i class="fas fa-chalkboard-teacher mr-2 text-primary"></i>
                                <span id="teacherLabel">Class Teacher</span>
                            </label>
                            <select class="w-full px-4 py-3 border border-border-light rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-sm bg-white transition-all">
                                <option>Select Teacher</option>
                                <option>Suchita Singh</option>
                                <option>Dr. Sarah Wilson</option>
                                <option>Mr. John Davis</option>
                                <option>Ms. Emily Brown</option>
                            </select>
                        </div>
                        <div>
                            <button class="w-full bg-text-primary hover:bg-gray-800 text-white px-6 py-3 rounded-lg text-sm font-medium transition-all transform hover:scale-105 flex items-center justify-center shadow-md">
                                <i class="fas fa-search mr-2"></i>
                                Search
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Current Allocations Section -->
                <div class="bg-card-bg rounded-xl shadow-sm border border-border-light">
                    <!-- Section Header -->
                    <div class="px-6 py-5 border-b border-border-light">
                        <div class="flex justify-between items-center">
                            <h2 class="text-xl font-semibold text-text-primary">Current Allocations</h2>
                            <div class="flex space-x-3">
                                <button class="px-4 py-2 bg-accent hover:bg-accent-light text-white rounded-lg text-sm font-medium transition-all flex items-center shadow-sm">
                                    <i class="fas fa-download mr-2"></i>
                                    Export
                                </button>
                                <button id="bulkAssignBtn" class="px-4 py-2 bg-gray-300 text-gray-500 rounded-lg text-sm font-medium cursor-not-allowed flex items-center transition-all">
                                    <i class="fas fa-plus mr-2"></i>
                                    <span id="bulkAssignText">Bulk Subject Assign</span>
                                </button>
                                <button id="bulkRemoveBtn" class="px-4 py-2 bg-gray-300 text-gray-500 rounded-lg text-sm font-medium cursor-not-allowed flex items-center transition-all">
                                    <i class="fas fa-trash mr-2"></i>
                                    Bulk Remove
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Table Container -->
                    <div class="overflow-x-auto">
                        <!-- Tab 1 Table: Subject & Class Teacher -->
                        <table id="table1" class="w-full">
                            <thead class="bg-gray-50 border-b border-border-light">
                                <tr>
                                    <th class="text-left py-4 px-6 font-semibold text-text-primary text-sm w-12">
                                        <input type="checkbox" class="rounded border-gray-300 text-primary focus:ring-primary transition-all" id="selectAll1" onchange="toggleAllCheckboxes('1')">
                                    </th>
                                    <th class="text-left py-4 px-6 font-semibold text-text-primary text-sm">Class</th>
                                    <th class="text-left py-4 px-6 font-semibold text-text-primary text-sm">Subjects</th>
                                    <th class="text-left py-4 px-6 font-semibold text-text-primary text-sm">Class Teacher</th>
                                    <th class="text-center py-4 px-6 font-semibold text-text-primary text-sm">Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr class="border-b border-border-light hover:bg-gray-50 transition-all">
                                    <td class="py-4 px-6">
                                        <input type="checkbox" class="rounded border-gray-300 text-primary focus:ring-primary row-checkbox transition-all" onchange="updateBulkButtons()">
                                    </td>
                                    <td class="py-4 px-6">
                                        <span class="text-sm font-medium text-text-primary">Grade 1A</span>
                                    </td>
                                    <td class="py-4 px-6">
                                        <button class="bg-accent text-white px-3 py-1 rounded-full text-sm font-medium hover:bg-accent-light transition-all">
                                            8
                                        </button>
                                    </td>
                                    <td class="py-4 px-6">
                                        <div>
                                            <div class="text-sm font-medium text-text-primary">Suchita Singh</div>
                                            <div class="text-xs text-text-secondary mt-1">Mathematics Department</div>
                                        </div>
                                    </td>
                                    <td class="py-4 px-6 text-center">
                                        <div class="flex justify-center space-x-2">
                                            <button class="w-8 h-8 bg-yellow-100 hover:bg-yellow-200 text-yellow-600 rounded-full flex items-center justify-center transition-all transform hover:scale-110" onclick="editAllocation('Grade 1A')">
                                                <i class="fas fa-pencil-alt text-xs"></i>
                                            </button>
                                            <button class="w-8 h-8 bg-pink-100 hover:bg-pink-200 text-pink-600 rounded-full flex items-center justify-center transition-all transform hover:scale-110" onclick="deleteAllocation('Grade 1A')">
                                                <i class="fas fa-trash text-xs"></i>
                                            </button>
                                        </div>
                                    </td>
                                </tr>
                                <tr class="border-b border-border-light hover:bg-gray-50 transition-all">
                                    <td class="py-4 px-6">
                                        <input type="checkbox" class="rounded border-gray-300 text-primary focus:ring-primary row-checkbox transition-all" onchange="updateBulkButtons()">
                                    </td>
                                    <td class="py-4 px-6">
                                        <span class="text-sm font-medium text-text-primary">Grade 1B</span>
                                    </td>
                                    <td class="py-4 px-6">
                                        <button class="bg-accent text-white px-3 py-1 rounded-full text-sm font-medium hover:bg-accent-light transition-all">
                                            7
                                        </button>
                                    </td>
                                    <td class="py-4 px-6">
                                        <div>
                                            <div class="text-sm font-medium text-text-primary">Dr. Sarah Wilson</div>
                                            <div class="text-xs text-text-secondary mt-1">English Department</div>
                                        </div>
                                    </td>
                                    <td class="py-4 px-6 text-center">
                                        <div class="flex justify-center space-x-2">
                                            <button class="w-8 h-8 bg-yellow-100 hover:bg-yellow-200 text-yellow-600 rounded-full flex items-center justify-center transition-all transform hover:scale-110" onclick="editAllocation('Grade 1B')">
                                                <i class="fas fa-pencil-alt text-xs"></i>
                                            </button>
                                            <button class="w-8 h-8 bg-pink-100 hover:bg-pink-200 text-pink-600 rounded-full flex items-center justify-center transition-all transform hover:scale-110" onclick="deleteAllocation('Grade 1B')">
                                                <i class="fas fa-trash text-xs"></i>
                                            </button>
                                        </div>
                                    </td>
                                </tr>
                                <tr class="border-b border-border-light hover:bg-gray-50 transition-all">
                                    <td class="py-4 px-6">
                                        <input type="checkbox" class="rounded border-gray-300 text-primary focus:ring-primary row-checkbox transition-all" onchange="updateBulkButtons()">
                                    </td>
                                    <td class="py-4 px-6">
                                        <span class="text-sm font-medium text-text-primary">Grade 2A</span>
                                    </td>
                                    <td class="py-4 px-6">
                                        <button class="bg-accent text-white px-3 py-1 rounded-full text-sm font-medium hover:bg-accent-light transition-all">
                                            9
                                        </button>
                                    </td>
                                    <td class="py-4 px-6">
                                        <div>
                                            <div class="text-sm font-medium text-text-primary">Mr. John Davis</div>
                                            <div class="text-xs text-text-secondary mt-1">Science Department</div>
                                        </div>
                                    </td>
                                    <td class="py-4 px-6 text-center">
                                        <div class="flex justify-center space-x-2">
                                            <button class="w-8 h-8 bg-yellow-100 hover:bg-yellow-200 text-yellow-600 rounded-full flex items-center justify-center transition-all transform hover:scale-110" onclick="editAllocation('Grade 2A')">
                                                <i class="fas fa-pencil-alt text-xs"></i>
                                            </button>
                                            <button class="w-8 h-8 bg-pink-100 hover:bg-pink-200 text-pink-600 rounded-full flex items-center justify-center transition-all transform hover:scale-110" onclick="deleteAllocation('Grade 2A')">
                                                <i class="fas fa-trash text-xs"></i>
                                            </button>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>

                        <!-- Tab 2 Table: Primary and Secondary Teacher -->
                        <table id="table2" class="w-full hidden">
                            <thead class="bg-gray-50 border-b border-border-light">
                                <tr>
                                    <th class="text-left py-4 px-6 font-semibold text-text-primary text-sm w-12">
                                        <input type="checkbox" class="rounded border-gray-300 text-primary focus:ring-primary transition-all" id="selectAll2" onchange="toggleAllCheckboxes('2')">
                                    </th>
                                    <th class="text-left py-4 px-6 font-semibold text-text-primary text-sm">Subject</th>
                                    <th class="text-left py-4 px-6 font-semibold text-text-primary text-sm">Subject Teacher</th>
                                    <th class="text-left py-4 px-6 font-semibold text-text-primary text-sm">Assistant Teacher</th>
                                    <th class="text-left py-4 px-6 font-semibold text-text-primary text-sm">Class</th>
                                    <th class="text-center py-4 px-6 font-semibold text-text-primary text-sm">Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr class="border-b border-border-light hover:bg-gray-50 transition-all">
                                    <td class="py-4 px-6">
                                        <input type="checkbox" class="rounded border-gray-300 text-primary focus:ring-primary row-checkbox transition-all" onchange="updateBulkButtons()">
                                    </td>
                                    <td class="py-4 px-6">
                                        <span class="text-sm font-medium text-text-primary">Mathematics</span>
                                    </td>
                                    <td class="py-4 px-6">
                                        <button class="bg-accent/10 hover:bg-accent/20 text-accent px-3 py-2 rounded-lg text-sm font-medium transition-all flex items-center" onclick="openAllocationModal('Mathematics', 'primary')">
                                            <i class="fas fa-plus mr-2"></i>
                                            Add Allocation
                                        </button>
                                    </td>
                                    <td class="py-4 px-6">
                                        <button class="bg-accent/10 hover:bg-accent/20 text-accent px-3 py-2 rounded-lg text-sm font-medium transition-all flex items-center" onclick="openAllocationModal('Mathematics', 'assistant')">
                                            <i class="fas fa-plus mr-2"></i>
                                            Add Allocation
                                        </button>
                                    </td>
                                    <td class="py-4 px-6">
                                        <span class="text-sm text-text-primary">Grade 1A</span>
                                    </td>
                                    <td class="py-4 px-6 text-center">
                                        <div class="flex justify-center space-x-2">
                                            <button class="w-8 h-8 bg-yellow-100 hover:bg-yellow-200 text-yellow-600 rounded-full flex items-center justify-center transition-all transform hover:scale-110" onclick="editAllocation('Mathematics')">
                                                <i class="fas fa-pencil-alt text-xs"></i>
                                            </button>
                                            <button class="w-8 h-8 bg-pink-100 hover:bg-pink-200 text-pink-600 rounded-full flex items-center justify-center transition-all transform hover:scale-110" onclick="deleteAllocation('Mathematics')">
                                                <i class="fas fa-trash text-xs"></i>
                                            </button>
                                        </div>
                                    </td>
                                </tr>
                                <tr class="border-b border-border-light hover:bg-gray-50 transition-all">
                                    <td class="py-4 px-6">
                                        <input type="checkbox" class="rounded border-gray-300 text-primary focus:ring-primary row-checkbox transition-all" onchange="updateBulkButtons()">
                                    </td>
                                    <td class="py-4 px-6">
                                        <span class="text-sm font-medium text-text-primary">English</span>
                                    </td>
                                    <td class="py-4 px-6">
                                        <div class="bg-green-50 border border-green-200 rounded-lg p-3">
                                            <div class="text-sm font-medium text-green-800">Dr. Sarah Wilson</div>
                                            <div class="text-xs text-green-600 mt-1">English Department</div>
                                        </div>
                                    </td>
                                    <td class="py-4 px-6">
                                        <div class="bg-blue-50 border border-blue-200 rounded-lg p-3">
                                            <div class="text-sm font-medium text-blue-800">Ms. Emily Brown</div>
                                            <div class="text-xs text-blue-600 mt-1">English Department</div>
                                        </div>
                                    </td>
                                    <td class="py-4 px-6">
                                        <span class="text-sm text-text-primary">Grade 1B</span>
                                    </td>
                                    <td class="py-4 px-6 text-center">
                                        <div class="flex justify-center space-x-2">
                                            <button class="w-8 h-8 bg-yellow-100 hover:bg-yellow-200 text-yellow-600 rounded-full flex items-center justify-center transition-all transform hover:scale-110" onclick="editAllocation('English')">
                                                <i class="fas fa-pencil-alt text-xs"></i>
                                            </button>
                                            <button class="w-8 h-8 bg-pink-100 hover:bg-pink-200 text-pink-600 rounded-full flex items-center justify-center transition-all transform hover:scale-110" onclick="deleteAllocation('English')">
                                                <i class="fas fa-trash text-xs"></i>
                                            </button>
                                        </div>
                                    </td>
                                </tr>
                                <tr class="border-b border-border-light hover:bg-gray-50 transition-all">
                                    <td class="py-4 px-6">
                                        <input type="checkbox" class="rounded border-gray-300 text-primary focus:ring-primary row-checkbox transition-all" onchange="updateBulkButtons()">
                                    </td>
                                    <td class="py-4 px-6">
                                        <span class="text-sm font-medium text-text-primary">Science</span>
                                    </td>
                                    <td class="py-4 px-6">
                                        <div class="bg-green-50 border border-green-200 rounded-lg p-3">
                                            <div class="text-sm font-medium text-green-800">Mr. John Davis</div>
                                            <div class="text-xs text-green-600 mt-1">Science Department</div>
                                        </div>
                                    </td>
                                    <td class="py-4 px-6">
                                        <button class="bg-accent/10 hover:bg-accent/20 text-accent px-3 py-2 rounded-lg text-sm font-medium transition-all flex items-center" onclick="openAllocationModal('Science', 'assistant')">
                                            <i class="fas fa-plus mr-2"></i>
                                            Add Allocation
                                        </button>
                                    </td>
                                    <td class="py-4 px-6">
                                        <span class="text-sm text-text-primary">Grade 2A</span>
                                    </td>
                                    <td class="py-4 px-6 text-center">
                                        <div class="flex justify-center space-x-2">
                                            <button class="w-8 h-8 bg-yellow-100 hover:bg-yellow-200 text-yellow-600 rounded-full flex items-center justify-center transition-all transform hover:scale-110" onclick="editAllocation('Science')">
                                                <i class="fas fa-pencil-alt text-xs"></i>
                                            </button>
                                            <button class="w-8 h-8 bg-pink-100 hover:bg-pink-200 text-pink-600 rounded-full flex items-center justify-center transition-all transform hover:scale-110" onclick="deleteAllocation('Science')">
                                                <i class="fas fa-trash text-xs"></i>
                                            </button>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Allocation Modal -->
    <div id="allocationModal" class="fixed inset-0 bg-black bg-opacity-50 hidden flex items-center justify-center z-50">
        <div class="bg-white rounded-xl shadow-2xl max-w-md w-full mx-4 transform transition-all">
            <div class="px-6 py-5 border-b border-border-light">
                <div class="flex justify-between items-center">
                    <h3 class="text-lg font-semibold text-text-primary" id="modalTitle">Add Teacher Allocation</h3>
                    <button onclick="closeAllocationModal()" class="text-gray-400 hover:text-gray-600 transition-all">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            </div>
            <div class="p-6">
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-text-primary mb-2">Subject</label>
                        <select id="modalSubject" class="w-full px-4 py-3 border border-border-light rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-sm transition-all">
                            <option>Mathematics</option>
                            <option>English</option>
                            <option>Science</option>
                            <option>Social Studies</option>
                            <option>Art</option>
                            <option>Physical Education</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-text-primary mb-2">Subject Teacher</label>
                        <select id="modalPrimaryTeacher" class="w-full px-4 py-3 border border-border-light rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-sm transition-all">
                            <option>Select Primary Teacher</option>
                            <option>Dr. Sarah Wilson</option>
                            <option>Mr. John Davis</option>
                            <option>Ms. Emily Brown</option>
                            <option>Mrs. Lisa Johnson</option>
                            <option>Mr. Michael Chen</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-text-primary mb-2">Assistant Teacher</label>
                        <select id="modalAssistantTeacher" class="w-full px-4 py-3 border border-border-light rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-sm transition-all">
                            <option>Select Assistant Teacher</option>
                            <option>Dr. Sarah Wilson</option>
                            <option>Mr. John Davis</option>
                            <option>Ms. Emily Brown</option>
                            <option>Mrs. Lisa Johnson</option>
                            <option>Mr. Michael Chen</option>
                        </select>
                    </div>
                </div>
            </div>
            <div class="px-6 py-4 border-t border-border-light flex justify-end space-x-3">
                <button onclick="closeAllocationModal()" class="px-4 py-2 border border-border-light rounded-lg text-sm font-medium text-text-secondary hover:bg-gray-50 transition-all">
                    Cancel
                </button>
                <button onclick="saveAllocation()" class="px-4 py-2 bg-primary hover:bg-primary-light text-white rounded-lg text-sm font-medium transition-all transform hover:scale-105">
                    Save Allocation
                </button>
            </div>
        </div>
    </div>

    <!-- Confirmation Modal -->
    <div id="confirmationModal" class="fixed inset-0 bg-black bg-opacity-50 hidden flex items-center justify-center z-50">
        <div class="bg-white rounded-xl shadow-2xl max-w-sm w-full mx-4 transform transition-all">
            <div class="p-6">
                <div class="text-center">
                    <div class="w-12 h-12 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4">
                        <i class="fas fa-exclamation-triangle text-red-600"></i>
                    </div>
                    <h3 class="text-lg font-semibold text-text-primary mb-2" id="confirmTitle">Confirm Action</h3>
                    <p class="text-text-secondary text-sm mb-6" id="confirmMessage">Are you sure you want to proceed?</p>
                    <div class="flex space-x-3">
                        <button onclick="closeConfirmationModal()" class="flex-1 px-4 py-2 border border-border-light rounded-lg text-sm font-medium text-text-secondary hover:bg-gray-50 transition-all">
                            Cancel
                        </button>
                        <button id="confirmButton" class="flex-1 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg text-sm font-medium transition-all">
                            Confirm
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentTab = 'tab1';
        let currentSubject = '';
        let currentType = '';

        function switchTab(tabId) {
            // Update tab buttons
            const tab1 = document.getElementById('tab1');
            const tab2 = document.getElementById('tab2');
            const table1 = document.getElementById('table1');
            const table2 = document.getElementById('table2');
            const teacherLabel = document.getElementById('teacherLabel');
            const bulkAssignText = document.getElementById('bulkAssignText');

            if (tabId === 'tab1') {
                // Activate tab 1
                tab1.classList.add('bg-white', 'text-text-primary', 'font-semibold', 'shadow-sm');
                tab1.classList.remove('text-text-secondary', 'font-medium', 'hover:bg-gray-200');
                
                // Deactivate tab 2
                tab2.classList.remove('bg-white', 'text-text-primary', 'font-semibold', 'shadow-sm');
                tab2.classList.add('text-text-secondary', 'font-medium', 'hover:bg-gray-200');
                
                // Show/hide tables
                table1.classList.remove('hidden');
                table2.classList.add('hidden');
                
                // Update labels
                teacherLabel.textContent = 'Class Teacher';
                bulkAssignText.textContent = 'Bulk Subject Assign';
            } else {
                // Activate tab 2
                tab2.classList.add('bg-white', 'text-text-primary', 'font-semibold', 'shadow-sm');
                tab2.classList.remove('text-text-secondary', 'font-medium', 'hover:bg-gray-200');
                
                // Deactivate tab 1
                tab1.classList.remove('bg-white', 'text-text-primary', 'font-semibold', 'shadow-sm');
                tab1.classList.add('text-text-secondary', 'font-medium', 'hover:bg-gray-200');
                
                // Show/hide tables
                table2.classList.remove('hidden');
                table1.classList.add('hidden');
                
                // Update labels
                teacherLabel.textContent = 'Teacher';
                bulkAssignText.textContent = 'Bulk Assign';
            }
            
            currentTab = tabId;
            updateBulkButtons();
        }

        function toggleAllCheckboxes(tableId) {
            const selectAll = document.getElementById('selectAll' + tableId);
            const currentTable = document.getElementById('table' + tableId);
            const checkboxes = currentTable.querySelectorAll('.row-checkbox');
            
            checkboxes.forEach(checkbox => {
                checkbox.checked = selectAll.checked;
            });
            
            updateBulkButtons();
        }

        function updateBulkButtons() {
            const activeTable = currentTab === 'tab1' ? document.getElementById('table1') : document.getElementById('table2');
            const checkedBoxes = activeTable.querySelectorAll('.row-checkbox:checked');
            const bulkAssignBtn = document.getElementById('bulkAssignBtn');
            const bulkRemoveBtn = document.getElementById('bulkRemoveBtn');
            
            if (checkedBoxes.length > 0) {
                // Enable bulk assign
                bulkAssignBtn.classList.remove('bg-gray-300', 'text-gray-500', 'cursor-not-allowed');
                bulkAssignBtn.classList.add('bg-primary', 'hover:bg-primary-light', 'text-white', 'cursor-pointer');
                bulkAssignBtn.disabled = false;
                bulkAssignBtn.onclick = () => showConfirmation('Bulk Assign', `Assign to ${checkedBoxes.length} selected items?`, bulkAssign);
                
                // Enable bulk remove
                bulkRemoveBtn.classList.remove('bg-gray-300', 'text-gray-500', 'cursor-not-allowed');
                bulkRemoveBtn.classList.add('bg-red-600', 'hover:bg-red-700', 'text-white', 'cursor-pointer');
                bulkRemoveBtn.disabled = false;
                bulkRemoveBtn.onclick = () => showConfirmation('Bulk Remove', `Remove assignments from ${checkedBoxes.length} selected items?`, bulkRemove);
            } else {
                // Disable both buttons
                bulkAssignBtn.classList.add('bg-gray-300', 'text-gray-500', 'cursor-not-allowed');
                bulkAssignBtn.classList.remove('bg-primary', 'hover:bg-primary-light', 'text-white', 'cursor-pointer');
                bulkAssignBtn.disabled = true;
                bulkAssignBtn.onclick = null;
                
                bulkRemoveBtn.classList.add('bg-gray-300', 'text-gray-500', 'cursor-not-allowed');
                bulkRemoveBtn.classList.remove('bg-red-600', 'hover:bg-red-700', 'text-white', 'cursor-pointer');
                bulkRemoveBtn.disabled = true;
                bulkRemoveBtn.onclick = null;
            }
        }

        function openAllocationModal(subject, type) {
            currentSubject = subject;
            currentType = type;
            document.getElementById('modalSubject').value = subject;
            document.getElementById('modalTitle').textContent = `Add ${type === 'primary' ? 'Subject' : 'Assistant'} Teacher - ${subject}`;
            document.getElementById('allocationModal').classList.remove('hidden');
        }

        function closeAllocationModal() {
            document.getElementById('allocationModal').classList.add('hidden');
            document.getElementById('modalPrimaryTeacher').value = 'Select Primary Teacher';
            document.getElementById('modalAssistantTeacher').value = 'Select Assistant Teacher';
            currentSubject = '';
            currentType = '';
        }

        function saveAllocation() {
            const primaryTeacher = document.getElementById('modalPrimaryTeacher').value;
            const assistantTeacher = document.getElementById('modalAssistantTeacher').value;
            
            if (primaryTeacher === 'Select Primary Teacher' && assistantTeacher === 'Select Assistant Teacher') {
                alert('Please select at least one teacher');
                return;
            }
            
            console.log('Saving allocation:', { subject: currentSubject, primary: primaryTeacher, assistant: assistantTeacher });
            closeAllocationModal();
        }

        function showConfirmation(title, message, callback) {
            document.getElementById('confirmTitle').textContent = title;
            document.getElementById('confirmMessage').textContent = message;
            document.getElementById('confirmButton').onclick = () => {
                callback();
                closeConfirmationModal();
            };
            document.getElementById('confirmationModal').classList.remove('hidden');
        }

        function closeConfirmationModal() {
            document.getElementById('confirmationModal').classList.add('hidden');
        }

        function bulkAssign() {
            const activeTable = currentTab === 'tab1' ? document.getElementById('table1') : document.getElementById('table2');
            const checkedBoxes = activeTable.querySelectorAll('.row-checkbox:checked');
            console.log('Bulk assigning to', checkedBoxes.length, 'items');
        }

        function bulkRemove() {
            const activeTable = currentTab === 'tab1' ? document.getElementById('table1') : document.getElementById('table2');
            const checkedBoxes = activeTable.querySelectorAll('.row-checkbox:checked');
            console.log('Bulk removing from', checkedBoxes.length, 'items');
        }

        function deleteAllocation(item) {
            showConfirmation('Delete Allocation', `Remove all assignments for ${item}?`, () => {
                console.log('Deleting allocation for', item);
            });
        }

        function editAllocation(item) {
            console.log('Editing allocation for', item);
        }

        // Initialize the page
        document.addEventListener('DOMContentLoaded', function() {
            updateBulkButtons();
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'96a60f5e52afffa3',t:'MTc1NDM5NDQ1MC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
